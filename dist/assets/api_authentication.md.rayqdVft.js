import{_ as e,c as t,o as a,a4 as i}from"./chunks/framework.Caa1YTU6.js";const g=JSON.parse('{"title":"Authentication","description":"","frontmatter":{},"headers":[],"relativePath":"api/authentication.md","filePath":"api/authentication.md"}'),s={name:"api/authentication.md"},n=i(`<h1 id="authentication" tabindex="-1">Authentication <a class="header-anchor" href="#authentication" aria-label="Permalink to &quot;Authentication&quot;">​</a></h1><p>To use the Vanguard API, you need to authenticate your requests using an API token. This document explains how to obtain and use API tokens, as well as the available scopes for fine-grained access control.</p><h2 id="obtaining-an-api-token" tabindex="-1">Obtaining an API Token <a class="header-anchor" href="#obtaining-an-api-token" aria-label="Permalink to &quot;Obtaining an API Token&quot;">​</a></h2><ol><li>Log in to your Vanguard account.</li><li>Navigate to your account settings.</li><li>Find the &quot;Manage API Tokens&quot; section.</li><li>Click on &quot;Create New Token&quot;.</li><li>Select the necessary scopes for your intended operations.</li><li>Save the token securely - you won&#39;t be able to see it again!</li></ol><h2 id="using-your-api-token" tabindex="-1">Using Your API Token <a class="header-anchor" href="#using-your-api-token" aria-label="Permalink to &quot;Using Your API Token&quot;">​</a></h2><p>Include your API token in the <code>Authorization</code> header of each request:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Authorization: Bearer YOUR_API_TOKEN</span></span></code></pre></div><p>Always keep your API token secure and never share it publicly.</p><h2 id="api-headers" tabindex="-1">API Headers <a class="header-anchor" href="#api-headers" aria-label="Permalink to &quot;API Headers&quot;">​</a></h2><p>Include these headers with each request:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Accept: application/json</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span>Authorization: Bearer YOUR_API_TOKEN</span></span></code></pre></div><h2 id="device-endpoint-authentication" tabindex="-1">Device Endpoint Authentication <a class="header-anchor" href="#device-endpoint-authentication" aria-label="Permalink to &quot;Device Endpoint Authentication&quot;">​</a></h2><p>Vanguard provides a dedicated endpoint for device authentication, primarily used for mobile apps and other client applications. This endpoint allows you to obtain an API token using email and password credentials.</p><h3 id="enabling-the-device-authentication-endpoint" tabindex="-1">Enabling the Device Authentication Endpoint <a class="header-anchor" href="#enabling-the-device-authentication-endpoint" aria-label="Permalink to &quot;Enabling the Device Authentication Endpoint&quot;">​</a></h3><p>The device authentication endpoint is disabled by default for security reasons. To enable it, set the following environment variable in your <code>.env</code> file:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ENABLE_DEVICE_AUTH_ENDPOINT=true</span></span></code></pre></div><h3 id="endpoint-details" tabindex="-1">Endpoint Details <a class="header-anchor" href="#endpoint-details" aria-label="Permalink to &quot;Endpoint Details&quot;">​</a></h3><ul><li><strong>URL</strong>: <code>/api/sanctum/token</code></li><li><strong>Method</strong>: POST</li><li><strong>Content-Type</strong>: application/json</li></ul><h3 id="required-fields" tabindex="-1">Required Fields <a class="header-anchor" href="#required-fields" aria-label="Permalink to &quot;Required Fields&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>email</td><td>string</td><td>The email address of the user</td></tr><tr><td>password</td><td>string</td><td>The user&#39;s password</td></tr><tr><td>device_name</td><td>string</td><td>A name to identify the device</td></tr></tbody></table><h3 id="example-request" tabindex="-1">Example Request <a class="header-anchor" href="#example-request" aria-label="Permalink to &quot;Example Request&quot;">​</a></h3><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/sanctum/token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_secure_password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;device_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;iPhone 16 Pro&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="example-response" tabindex="-1">Example Response <a class="header-anchor" href="#example-response" aria-label="Permalink to &quot;Example Response&quot;">​</a></h3><p>If the authentication is successful, you&#39;ll receive a JSON response with a token:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1|EBu8jQmpsplYoakc4Nt2PMw4jkabRAhKEBn5Zhxs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="token-scope-and-security-considerations" tabindex="-1">Token Scope and Security Considerations <a class="header-anchor" href="#token-scope-and-security-considerations" aria-label="Permalink to &quot;Token Scope and Security Considerations&quot;">​</a></h3><p><strong>Important:</strong> The token generated by this endpoint has full access to all scopes. This means it is a very powerful token with unrestricted access to the API. Please be aware of the following:</p><p>This token can perform any action that the user account is capable of. It should be treated with the utmost care and security. It&#39;s recommended to use this powerful token only for trusted applications or devices. For applications that don&#39;t need full access, consider creating more restricted tokens through the web interface.</p><p>Use this token in the <code>Authorization</code> header for subsequent API requests, as described in the &quot;Using Your API Token&quot; section above.</p><h3 id="error-responses" tabindex="-1">Error Responses <a class="header-anchor" href="#error-responses" aria-label="Permalink to &quot;Error Responses&quot;">​</a></h3><ul><li>If the credentials are incorrect, you&#39;ll receive a 422 Unprocessable Entity response with validation errors.</li><li>If the device authentication endpoint is disabled, you&#39;ll receive a 404 Not Found response.</li></ul><h2 id="available-scopes" tabindex="-1">Available Scopes <a class="header-anchor" href="#available-scopes" aria-label="Permalink to &quot;Available Scopes&quot;">​</a></h2><p>API tokens can have limited permissions to enhance security. Ensure your token has the necessary scopes for the operations you intend to perform. Available scopes are:</p><table tabindex="0"><thead><tr><th>Scope</th><th>Description</th></tr></thead><tbody><tr><td>manage-tags</td><td>Allows managing of your tags</td></tr><tr><td>view-backup-destinations</td><td>Allows viewing backup destinations</td></tr><tr><td>create-backup-destinations</td><td>Allows creating new backup destinations</td></tr><tr><td>update-backup-destinations</td><td>Allows updating existing backup destinations</td></tr><tr><td>delete-backup-destinations</td><td>Allows deleting backup destinations</td></tr><tr><td>view-remote-servers</td><td>Allows viewing remote servers</td></tr><tr><td>create-remote-servers</td><td>Allows creating new remote servers</td></tr><tr><td>update-remote-servers</td><td>Allows updating existing remote servers</td></tr><tr><td>delete-remote-servers</td><td>Allows deleting remote servers</td></tr><tr><td>view-notification-streams</td><td>Allows viewing notification streams</td></tr><tr><td>create-notification-streams</td><td>Allows creating new notification streams</td></tr><tr><td>update-notification-streams</td><td>Allows updating existing notification streams</td></tr><tr><td>delete-notification-streams</td><td>Allows deleting notification streams</td></tr><tr><td>view-backup-tasks</td><td>Allows viewing backup tasks</td></tr><tr><td>create-backup-tasks</td><td>Allows creating new backup tasks</td></tr><tr><td>update-backup-tasks</td><td>Allows updating existing backup tasks</td></tr><tr><td>delete-backup-tasks</td><td>Allows deleting backup tasks</td></tr><tr><td>run-backup-tasks</td><td>Allows the running of backup tasks</td></tr></tbody></table><p>When creating or updating an API token, you can select one or more of these scopes to grant the token specific permissions.</p><h2 id="best-practices-for-api-token-security" tabindex="-1">Best Practices for API Token Security <a class="header-anchor" href="#best-practices-for-api-token-security" aria-label="Permalink to &quot;Best Practices for API Token Security&quot;">​</a></h2><ol><li>Use appropriate scopes: Only request the minimal set of permissions your application needs.</li><li>Rotate tokens regularly: Create new tokens and deprecate old ones periodically.</li><li>Use environment variables: Store your API tokens in environment variables rather than hardcoding them.</li><li>Revoke unused tokens: If you no longer need a token, revoke it immediately.</li></ol><p>Remember, your API token is a secret key that grants access to your Vanguard account. Always handle it with care and never expose it in public repositories or client-side code.</p>`,38),o=[n];function r(l,d,p,h,c,u){return a(),t("div",null,o)}const b=e(s,[["render",r]]);export{g as __pageData,b as default};
